{% extends "clientes/base.html" %}

{% block title %}Cadastrar Novo Cliente{% endblock %}

{% block content %}
    <h1 class="mb-4 text-success">➕ Cadastrar Novo Cliente</h1>
    
    <form method="POST" class="needs-validation" novalidate>
        {% csrf_token %} 
        
    <div class="mb-3">
        <label for="nome" class="form-label">Nome:</label>
        <input type="text" class="form-control" id="nome" name="nome" required>
        <div class="invalid-feedback">
            Por favor, informe o nome.
        </div>
    </div>
    
    <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email" name="email" required>
        <div class="invalid-feedback">
            Por favor, informe um email válido.
        </div>
    </div>
        


    <div class="mb-3">
        <label for="telefone" class="form-label">Telefone (com código do país):</label>
        <input 
            type="tel" 
            class="form-control" 
            id="telefone" 
            name="telefone" 
            placeholder="+55 11 99999-9999"
            value="+"
            onfocus="ensurePlus(this)"
            oninput="formatInput(this)"
            required
        >
        <div class="invalid-feedback">
            Informe o telefone com código do país.
        </div>
    </div>  

<script>
function ensurePlus(input) {
    if (input.value === "") {
        input.value = "+";
    }
}

function formatInput(input) {
    // 1. Remove tudo que não for número
    let digits = input.value.replace(/\D/g, '');
    
    // 2. Coloca o + de volta na frente dos números
    input.value = '+' + digits;
}
</script>




        
        <button type="submit" class="btn btn-success me-2">Cadastrar</button>
        <a href="{% url 'listar_clientes' %}" class="btn btn-secondary">↩️ Voltar</a>
    </form>
{% endblock %}